version = '1.0'
String APP_JAR = "dm.jar"

apply plugin: 'java'
defaultTasks 'clean', 'buildAll'

sourceCompatibility = 1.8
targetCompatibility = 1.8

sourceSets {
    main {
        java {
            srcDir 'src/com/dm/lib/'
        }
    }
    test {
        java {
            srcDir 'tests/com/dm/lib/'
        }
    }
}

task buildAll(type: Jar) {
    from sourceSets.main.output
    classifier = "main"
    archiveName = APP_JAR
    manifest {
        attributes "Main-Class" : "com.dm.lib.Main",
                   "Implementation-Version" : "${version}"
    }
}

repositories {
    mavenCentral()
}

